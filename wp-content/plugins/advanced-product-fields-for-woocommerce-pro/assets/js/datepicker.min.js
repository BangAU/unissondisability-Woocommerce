!function(f){function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}f=f&&f.hasOwnProperty("default")?f.default:f;var i={autoShow:!1,autoHide:!1,autoPick:!1,inline:!1,container:null,trigger:null,language:"",format:"mm/dd/yyyy",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",highlightedClass:"highlighted",template:'<div class="wapf-dp-c"> <div class="dp-panel" data-view="years picker"> <div class="wapf-dp-header"> <div data-view="years prev">&lsaquo;</div><div class="current" data-view="years current"></div><div data-view="years next">&rsaquo;</div></div><ul data-view="years"></ul> </div><div class="dp-panel" data-view="months picker"> <div class="wapf-dp-header"> <div data-view="year prev">&lsaquo;</div><div class="current" data-view="year current"></div><div data-view="year next">&rsaquo;</div></div><ul data-view="months"></ul> </div><div class="dp-panel" data-view="days picker"> <div class="wapf-dp-header"> <div data-view="month prev">&lsaquo;</div><div class="current" data-view="month current"></div><div data-view="month next">&rsaquo;</div></div><ul class="weeks" data-view="week"></ul> <ul data-view="days"></ul> </div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},t="undefined"!=typeof window,e=t?window:{},s=t&&"ontouchstart"in e.document.documentElement,d="wapf-dp",n="click.".concat(d),r="focus.".concat(d),h="hide.".concat(d),o="keyup.".concat(d),l="pick.".concat(d),c="resize.".concat(d),u="scroll.".concat(d),p="show.".concat(d),g="touchstart.".concat(d),v="".concat(d,"-hide"),y={},m=0,w=1,k=2,D=Object.prototype.toString;function b(t){return"string"==typeof t}var C=Number.isNaN||e.isNaN;function $(t){return"number"==typeof t&&!C(t)}function x(t){return void 0===t}function M(t){return"date"===function(t){return D.call(t).slice(8,-1).toLowerCase()}(t)&&!C(t.getTime())}function F(a,s){for(var t=arguments.length,n=new Array(2<t?t-2:0),e=2;e<t;e++)n[e-2]=arguments[e];return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.apply(s,n.concat(e))}}function Y(t){return'[data-view="'.concat(t,'"]')}function G(t,e){return[31,function(t){return t%4==0&&t%100!=0||t%400==0}(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function V(t,e,i){return Math.min(i,G(t,e))}var I=/(y|m|d)+/g;function S(t,e){var i=1<arguments.length&&void 0!==e?e:1,a=String(Math.abs(t)),s=a.length,n="";for(t<0&&(n+="-");s<i;)s+=1,n+="0";return n+a}var T=/\d+/g,P={show:function(){this.built||this.build(),this.shown||this.trigger(p).isDefaultPrevented()||(this.shown=!0,this.$picker.removeClass(v).on(n,f.proxy(this.click,this)),this.showView(this.options.startView),this.inline||(this.$scrollParent.on(u,f.proxy(this.place,this)),f(window).on(c,this.onResize=F(this.place,this)),f(document).on(n,this.onGlobalClick=F(this.globalClick,this)),f(document).on(o,this.onGlobalKeyup=F(this.globalKeyup,this)),s&&f(document).on(g,this.onTouchStart=F(this.touchstart,this)),this.place()))},hide:function(){this.shown&&(this.trigger(h).isDefaultPrevented()||(this.shown=!1,this.$picker.addClass(v).off(n,this.click),this.inline||(this.$scrollParent.off(u,this.place),f(window).off(c,this.onResize),f(document).off(n,this.onGlobalClick),f(document).off(o,this.onGlobalKeyup),s&&f(document).off(g,this.onTouchStart))))},toggle:function(){this.shown?this.hide():this.show()},update:function(){var t=this.getValue();t!==this.oldValue&&(this.setDate(t,!0),this.oldValue=t)},pick:function(t){var e=this.$element,i=this.date;this.trigger(l,{view:t||"",date:i}).isDefaultPrevented()||(i=this.formatDate(this.date),this.setValue(i),this.isInput&&(e.trigger("input"),e.trigger("change")))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.shown&&this.showView(this.options.startView)},getMonthName:function(t,e){var i=this.options,a=i.monthsShort,s=i.months;return f.isNumeric(t)?t=Number(t):x(e)&&(e=t),!0===e&&(s=a),s[$(t)?t:this.date.getMonth()]},getDayName:function(t,e,i){var a=this.options,s=a.days;return f.isNumeric(t)?t=Number(t):(x(i)&&(i=e),x(e)&&(e=t)),i?s=a.daysMin:e&&(s=a.daysShort),s[$(t)?t:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(t,e){var i=this.options.filter;if(M(t)||b(t)){if(t=this.parseDate(t),"function"==typeof i&&!1===i.call(this.$element,t,"day"))return;this.date=t,this.viewDate=new Date(t),e||this.pick(),this.built&&this.render()}},setStartDate:function(t){M(t)||b(t)?this.startDate=this.parseDate(t):this.startDate=null,this.built&&this.render()},setEndDate:function(t){M(t)||b(t)?this.endDate=this.parseDate(t):this.endDate=null,this.built&&this.render()},parseDate:function(a){var s=this.format,t=[];return M(a)||(b(a)&&(t=a.match(T)||[]),M(a=a?new Date(a):new Date)||(a=new Date),t.length===s.parts.length&&(f.each(t,function(t,e){var i=parseInt(e,10);switch(s.parts[t]){case"yy":a.setFullYear(2e3+i);break;case"yyyy":a.setFullYear(2===e.length?2e3+i:i);break;case"mm":case"m":a.setMonth(i-1)}}),f.each(t,function(t,e){var i=parseInt(e,10);switch(s.parts[t]){case"dd":case"d":a.setDate(i)}}))),new Date(a.getFullYear(),a.getMonth(),a.getDate())},formatDate:function(t){var e=this.format,i="";if(M(t)){var a=t.getFullYear(),s=t.getMonth(),n=t.getDate(),r={d:n,dd:S(n,2),m:s+1,mm:S(s+1,2),yy:String(a).substring(2),yyyy:S(a,4)};i=e.source,f.each(e.parts,function(t,e){i=i.replace(e,r[e])})}return i},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(d)}},N={click:function(t){var e=f(t.target);e.is("span")&&(e=e.parent());var i=this.options,a=this.date,s=this.viewDate,n=this.format;if(t.stopPropagation(),t.preventDefault(),!e.hasClass("disabled")){var r=e.data("view"),h=s.getFullYear(),o=s.getMonth(),l=s.getDate();switch(r){case"years prev":case"years next":h="years prev"===r?h-10:h+10,s.setFullYear(h),s.setDate(V(h,o,l)),this.renderYears();break;case"year prev":case"year next":h="year prev"===r?h-1:h+1,s.setFullYear(h),s.setDate(V(h,o,l)),this.renderMonths();break;case"year current":n.hasYear&&this.showView(k);break;case"year picked":n.hasMonth?this.showView(w):(e.siblings(".".concat(i.pickedClass)).removeClass(i.pickedClass).data("view","year"),this.hideView()),this.pick("year");break;case"year":h=parseInt(e.find("span").text(),10),a.setDate(V(h,o,l)),a.setFullYear(h),s.setDate(V(h,o,l)),s.setFullYear(h),n.hasMonth?this.showView(w):(e.addClass(i.pickedClass).data("view","year picked").siblings(".".concat(i.pickedClass)).removeClass(i.pickedClass).data("view","year"),this.hideView()),this.pick("year");break;case"month prev":case"month next":(o="month prev"===r?o-1:o+1)<0?(h-=1,o+=12):11<o&&(h+=1,o-=12),s.setFullYear(h),s.setDate(V(h,o,l)),s.setMonth(o),this.renderDays();break;case"month current":n.hasMonth&&this.showView(w);break;case"month picked":n.hasDay?this.showView(m):(e.siblings(".".concat(i.pickedClass)).removeClass(i.pickedClass).data("view","month"),this.hideView()),this.pick("month");break;case"month":o=f.inArray(e.find("span").text(),i.monthsShort),a.setFullYear(h),a.setDate(V(h,o,l)),a.setMonth(o),s.setFullYear(h),s.setDate(V(h,o,l)),s.setMonth(o),n.hasDay?this.showView(m):(e.addClass(i.pickedClass).data("view","month picked").siblings(".".concat(i.pickedClass)).removeClass(i.pickedClass).data("view","month"),this.hideView()),this.pick("month");break;case"day prev":case"day next":case"day":"day prev"===r?o-=1:"day next"===r&&(o+=1),l=parseInt(e.find("span").text(),10),a.setDate(1),a.setFullYear(h),a.setMonth(o),a.setDate(l),s.setDate(1),s.setFullYear(h),s.setMonth(o),s.setDate(l),this.renderDays(),"day"===r&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}}},globalClick:function(t){for(var e=t.target,i=this.element,a=this.$trigger[0],s=!0;e!==document;){if(e===a||e===i){s=!1;break}e=e.parentNode}s&&this.hide()},keyup:function(){this.update()},globalKeyup:function(t){var e=t.target,i=t.key,a=t.keyCode;this.isInput&&e!==this.element&&this.shown&&("Tab"===i||9===a)&&this.hide()},touchstart:function(t){var e=t.target;this.isInput&&e!==this.element&&!f.contains(this.$picker[0],e)&&(this.hide(),this.element.blur())}},j={render:function(){this.renderYears(),this.renderMonths(),this.renderDays()},renderWeek:function(){var i=this,a=[],t=this.options,e=t.weekStart,s=t.daysMin;e=parseInt(e,10)%7,s=s.slice(e).concat(s.slice(0,e)),f.each(s,function(t,e){a.push(i.createItem({text:e}))}),this.$week.html(a.join(""))},renderYears:function(){var t,e=this.options,i=this.startDate,a=this.endDate,s=e.disabledClass,n=e.filter,r=e.yearSuffix,h=this.viewDate.getFullYear(),o=(new Date).getFullYear(),l=this.date.getFullYear(),d=[],c=!1,u=!1;for(t=-5;t<=6;t+=1){var p=new Date(h+t,1,1),f=!1;i&&(f=p.getFullYear()<i.getFullYear(),-5===t&&(c=f)),!f&&a&&(f=p.getFullYear()>a.getFullYear(),6===t&&(u=f)),!f&&n&&(f=!1===n.call(this.$element,p,"year"));var g=h+t===l,v=g?"year picked":"year";d.push(this.createItem({picked:g,disabled:f,text:h+t,view:f?"year disabled":v,highlighted:p.getFullYear()===o}))}this.$yearsPrev.toggleClass(s,c),this.$yearsNext.toggleClass(s,u),this.$yearsCurrent.toggleClass(s,!0).html("".concat(h+-5+r," - ").concat(h+6).concat(r)),this.$years.html(d.join(""))},renderMonths:function(){var t,e=this.options,i=this.startDate,a=this.endDate,s=this.viewDate,n=e.disabledClass||"",r=e.monthsShort,h="function"==typeof e.filter&&e.filter,o=s.getFullYear(),l=new Date,d=l.getFullYear(),c=l.getMonth(),u=this.date.getFullYear(),p=this.date.getMonth(),f=[],g=!1,v=!1;for(t=0;t<=11;t+=1){var y=new Date(o,t,1),m=!1;i&&(m=(g=y.getFullYear()===i.getFullYear())&&y.getMonth()<i.getMonth()),!m&&a&&(m=(v=y.getFullYear()===a.getFullYear())&&y.getMonth()>a.getMonth()),!m&&h&&(m=!1===h.call(this.$element,y,"month"));var w=o===u&&t===p,k=w?"month picked":"month";f.push(this.createItem({disabled:m,picked:w,highlighted:o===d&&y.getMonth()===c,index:t,text:r[t],view:m?"month disabled":k}))}this.$yearPrev.toggleClass(n,g),this.$yearNext.toggleClass(n,v),this.$yearCurrent.toggleClass(n,g&&v).html(o+e.yearSuffix||""),this.$months.html(f.join(""))},renderDays:function(){var t,e,i,a=this.$element,s=this.options,n=this.startDate,r=this.endDate,h=this.viewDate,o=this.date,l=s.disabledClass,d=s.filter,c=s.months,u=s.weekStart,p=s.yearSuffix,f=h.getFullYear(),g=h.getMonth(),v=new Date,y=v.getFullYear(),m=v.getMonth(),w=v.getDate(),k=o.getFullYear(),D=o.getMonth(),b=o.getDate(),C=[],$=f,x=g,M=!1;0===g?($-=1,x=11):x-=1,t=G($,x);var F=new Date(f,g,1);for((i=F.getDay()-parseInt(u,10)%7)<=0&&(i+=7),n&&(M=F.getTime()<=n.getTime()),e=t-(i-1);e<=t;e+=1){var Y=new Date($,x,e),V=!1;n&&(V=Y.getTime()<n.getTime()),!V&&d&&(V=!1===d.call(a,Y,"day")),C.push(this.createItem({disabled:V,highlighted:$===y&&x===m&&Y.getDate()===w,muted:!0,picked:$===k&&x===D&&e===b,text:e,view:"day prev"}))}var I=[],S=f,T=g,P=!1;11===g?(S+=1,T=0):T+=1,t=G(f,g),i=42-(C.length+t);var N=new Date(f,g,t);for(r&&(P=N.getTime()>=r.getTime()),e=1;e<=i;e+=1){var j=new Date(S,T,e),A=S===k&&T===D&&e===b,O=!1;r&&(O=j.getTime()>r.getTime()),!O&&d&&(O=!1===d.call(a,j,"day")),I.push(this.createItem({disabled:O,picked:A,highlighted:S===y&&T===m&&j.getDate()===w,muted:!0,text:e,view:"day next"}))}var q=[];for(e=1;e<=t;e+=1){var W=new Date(f,g,e),z=!1;n&&(z=W.getTime()<n.getTime()),!z&&r&&(z=W.getTime()>r.getTime()),!z&&d&&(z=!1===d.call(a,W,"day"));var J=f===k&&g===D&&e===b,E=J?"day picked":"day";q.push(this.createItem({disabled:z,picked:J,highlighted:f===y&&g===m&&W.getDate()===w,text:e,view:z?"day disabled":E}))}this.$monthPrev.toggleClass(l,M),this.$monthNext.toggleClass(l,P),this.$monthCurrent.toggleClass(l,M&&P).html(s.yearFirst?"".concat(f+p," ").concat(c[g]):"".concat(c[g]," ").concat(f).concat(p)),this.$days.html(C.join("")+q.join("")+I.join(""))}},A="".concat(d,"-top-left"),O="".concat(d,"-top-right"),q="".concat(d,"-bottom-left"),W="".concat(d,"-bottom-right"),z=[A,O,q,W].join(" "),J=function(){function t(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.$element=f(t),this.element=t,this.options=f.extend({},i,y[e.language],f.isPlainObject(e)&&e),this.$scrollParent=function(t,e){var i=1<arguments.length&&void 0!==e&&e,a=f(t),s=a.css("position"),n="absolute"===s,r=i?/auto|scroll|hidden/:/auto|scroll/,h=a.parents().filter(function(t,e){var i=f(e);return(!n||"static"!==i.css("position"))&&r.test(i.css("overflow")+i.css("overflow-y")+i.css("overflow-x"))}).eq(0);return"fixed"!==s&&h.length?h:f(t.ownerDocument||document)}(t,!0),this.built=!1,this.shown=!1,this.isInput=!1,this.inline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}return function(t,e,i){e&&a(t.prototype,e),i&&a(t,i)}(t,[{key:"init",value:function(){var t=this.$element,e=this.options,i=e.startDate,a=e.endDate,s=e.date;this.$trigger=f(e.trigger),this.isInput=t.is("input")||t.is("textarea"),this.inline=e.inline&&(e.container||!this.isInput),this.format=function(i){var t=String(i).toLowerCase(),e=t.match(I);if(!e||0===e.length)throw new Error("Invalid date format.");return i={source:t,parts:e},f.each(e,function(t,e){switch(e){case"dd":case"d":i.hasDay=!0;break;case"mm":case"m":i.hasMonth=!0;break;case"yyyy":case"yy":i.hasYear=!0}}),i}(e.format);var n=this.getValue();this.initialValue=n,this.oldValue=n,s=this.parseDate(s||n),i&&(i=this.parseDate(i),s.getTime()<i.getTime()&&(s=new Date(i)),this.startDate=i),a&&(a=this.parseDate(a),i&&a.getTime()<i.getTime()&&(a=new Date(i)),s.getTime()>a.getTime()&&(s=new Date(a)),this.endDate=a),this.date=s,this.viewDate=new Date(s),this.initialDate=new Date(this.date),this.bind(),(e.autoShow||this.inline)&&this.show(),e.autoPick&&this.pick()}},{key:"build",value:function(){if(!this.built){this.built=!0;var t=this.$element,e=this.options,i=f(e.template);this.$picker=i,this.$week=i.find(Y("week")),this.$yearsPicker=i.find(Y("years picker")),this.$yearsPrev=i.find(Y("years prev")),this.$yearsNext=i.find(Y("years next")),this.$yearsCurrent=i.find(Y("years current")),this.$years=i.find(Y("years")),this.$monthsPicker=i.find(Y("months picker")),this.$yearPrev=i.find(Y("year prev")),this.$yearNext=i.find(Y("year next")),this.$yearCurrent=i.find(Y("year current")),this.$months=i.find(Y("months")),this.$daysPicker=i.find(Y("days picker")),this.$monthPrev=i.find(Y("month prev")),this.$monthNext=i.find(Y("month next")),this.$monthCurrent=i.find(Y("month current")),this.$days=i.find(Y("days")),this.inline?f(e.container||t).append(i.addClass("".concat(d,"-inline"))):(f(document.body).append(i.addClass("".concat(d,"-dropdown"))),i.addClass(v).css({zIndex:parseInt(e.zIndex,10)})),this.renderWeek()}}},{key:"unbuild",value:function(){this.built&&(this.built=!1,this.$picker.remove())}},{key:"bind",value:function(){var t=this.options,e=this.$element;"function"==typeof t.show&&e.on(p,t.show),"function"==typeof t.hide&&e.on(h,t.hide),"function"==typeof t.pick&&e.on(l,t.pick),this.isInput&&e.on(o,f.proxy(this.keyup,this)),this.inline||(t.trigger?this.$trigger.on(n,f.proxy(this.toggle,this)):this.isInput?e.on(r,f.proxy(this.show,this)):e.on(n,f.proxy(this.show,this)))}},{key:"unbind",value:function(){var t=this.$element,e=this.options;"function"==typeof e.show&&t.off(p,e.show),"function"==typeof e.hide&&t.off(h,e.hide),"function"==typeof e.pick&&t.off(l,e.pick),this.isInput&&t.off(o,this.keyup),this.inline||(e.trigger?this.$trigger.off(n,this.toggle):this.isInput?t.off(r,this.show):t.off(n,this.show))}},{key:"showView",value:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,a=this.$daysPicker,s=this.format;if(s.hasYear||s.hasMonth||s.hasDay)switch(Number(t)){case k:i.addClass(v),a.addClass(v),s.hasYear?(this.renderYears(),e.removeClass(v),this.place()):this.showView(m);break;case w:e.addClass(v),a.addClass(v),s.hasMonth?(this.renderMonths(),i.removeClass(v),this.place()):this.showView(k);break;default:e.addClass(v),i.addClass(v),s.hasDay?(this.renderDays(),a.removeClass(v),this.place()):this.showView(w)}}},{key:"hideView",value:function(){!this.inline&&this.options.autoHide&&this.hide()}},{key:"place",value:function(){if(!this.inline){var t=this.$element,e=this.options,i=this.$picker,a=f(document).outerWidth(),s=f(document).outerHeight(),n=t.outerWidth(),r=t.outerHeight(),h=i.width(),o=i.height(),l=t.offset(),d=l.left,c=l.top,u=parseFloat(e.offset),p=A;C(u)&&(u=10),o<c&&s<c+r+o?(c-=o+u,p=q):c+=r+u,a<d+h&&(d+=n-h,p=p.replace("left","right")),i.removeClass(z).addClass(p).css({top:c,left:d})}}},{key:"trigger",value:function(t,e){var i=f.Event(t,e);return this.$element.trigger(i),i}},{key:"createItem",value:function(t){var e=this.options,i=e.itemTag,a={text:"",view:"",muted:!1,picked:!1,disabled:!1,highlighted:!1},s=[];return f.extend(a,t),a.muted&&s.push(e.mutedClass),a.highlighted&&s.push(e.highlightedClass),a.picked&&s.push(e.pickedClass),a.disabled&&s.push(e.disabledClass),"<".concat(i,' class="').concat(s.join(" "),'" data-view="').concat(a.view,'">').concat("<span>"+a.text+"</span>","</").concat(i,">")}},{key:"getValue",value:function(){var t=this.$element;return this.isInput?t.val():t.text()}},{key:"setValue",value:function(t){var e=0<arguments.length&&void 0!==t?t:"",i=this.$element;this.isInput?i.val(e):this.inline&&!this.options.container||i.text(e)}}],[{key:"setDefaults",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};f.extend(i,y[e.language],f.isPlainObject(e)&&e)}}]),t}();if(f.extend&&f.extend(J.prototype,j,N,P),f.fn){f.fn.datepicker;f.fn.dp=function(h){for(var t=arguments.length,o=new Array(1<t?t-1:0),e=1;e<t;e++)o[e-1]=arguments[e];var l;return this.each(function(t,e){var i=f(e),a="destroy"===h,s=i.data(d);if(!s){if(a)return;var n=f.extend({},i.data(),f.isPlainObject(h)&&h);s=new J(e,n),i.data(d,s)}if(b(h)){var r=s[h];"function"==typeof r&&(l=r.apply(s,o),a&&i.removeData(d))}}),x(l)?this:l},f.fn.dp.Constructor=J,f.fn.dp.languages=y,f.fn.dp.setDefaults=J.setDefaults}}(jQuery);